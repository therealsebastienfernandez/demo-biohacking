<script>
    let numbers = $state([1, 2, 3, 4]);
    let total = $derived(numbers.reduce((t, n) => t + n, 0));
    const addNumber = () => {
        numbers.push(numbers.length + 1);
        console.log($state.snapshot(numbers));
    }
    $inspect(numbers).with(console.trace);
</script>
<p>{numbers.join(' + ')} = {total}</p>

<button onclick={addNumber}>
	Add a number
</button>